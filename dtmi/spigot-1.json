{
  "@id":"dtmi:Spigot;1",
  "@type":"Interface",
  "contents":[
	 {
		"@type":"Telemetry",
		"name":"messages",
		"displayName":"messages",
		"schema":{
		   "@type":"Array",
		   "elementSchema":{
			  "@type":"Object",
			  "fields":[
				 {
					"name":"PADME",
					"displayName":"PADME",
					"schema":{
					   "@id":"dtmi:Spigot:PADME;1",
					   "@type":"Object",
					   "fields":[
						  {
							 "@id":"dtmi:Spigot:PADME:sourceId;1",
							 "@type":"Field",
							 "comment":"source channel ID",
							 "description":{
								"en":"the enumerated channel the telemetry is coming from"
							 },
							 "displayName":{
								"en":"sourceId"
							 },
							 "name":"sourceId",
							 "schema":{
								"@id":"dtmi:Spigot:PADME:sourceId:schema;1",
								"@type":"Enum",
								"displayName":{
								   "en":"Enum"
								},
								"enumValues":[
								   {
									  "@id":"dtmi:Spigot:PADME:sourceId:schema:unknown;1",
									  "displayName":{
										 "en":"unknown"
									  },
									  "enumValue":0,
									  "name":"unknown"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:sourceId:schema:MQTT;1",
									  "displayName":{
										 "en":"MQTT"
									  },
									  "enumValue":1,
									  "name":"MQTT"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:sourceId:schema:BACnet;1",
									  "displayName":{
										 "en":"BACnet"
									  },
									  "enumValue":2,
									  "name":"BACnet"
								   }
								],
								"valueSchema":"integer"
							 }
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:deviceType;1",
							 "@type":"Field",
							 "comment":"device type",
							 "description":{
								"en":"the enumerated device type of the device the telemetry is coming from"
							 },
							 "displayName":{
								"en":"deviceType"
							 },
							 "name":"deviceType",
							 "schema":{
								"@id":"dtmi:Spigot:PADME:deviceType:schema;1",
								"@type":"Enum",
								"displayName":{
								   "en":"Enum"
								},
								"enumValues":[
								   {
									  "@id":"dtmi:Spigot:PADME:deviceType:schema:unknown;1",
									  "displayName":{
										 "en":"unknown"
									  },
									  "enumValue":0,
									  "name":"unknown"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:deviceType:schema:Shelly1PM;1",
									  "displayName":{
										 "en":" Shelly 1PM"
									  },
									  "enumValue":1,
									  "name":"Shelly1PM"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:deviceType:schema:ShellyRGBW2;1",
									  "displayName":{
										 "en":" Shelly RGBW2"
									  },
									  "enumValue":2,
									  "name":"ShellyRGBW2"
								   }
								],
								"valueSchema":"integer"
							 }
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:sourceAddress;1",
							 "@type":[
								"Field",
								"StringValue"
							 ],
							 "comment":"e.g. UUID",
							 "description":{
								"en":"the unique ID string of the device the telemetry is coming from"
							 },
							 "displayName":{
								"en":"sourceAddress"
							 },
							 "name":"sourceAddress",
							 "schema":"string"
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:unitId;1",
							 "@type":"Field",
							 "comment":"unit of numVal",
							 "description":{
								"en":"the kind of value that is sent, encoding physical unit as well"
							 },
							 "displayName":{
								"en":"unitId"
							 },
							 "name":"unitId",
							 "schema":{
								"@id":"dtmi:Spigot:PADME:unitId:schema;1",
								"@type":"Enum",
								"displayName":{
								   "en":"Enum"
								},
								"enumValues":[
								   {
									  "@id":"dtmi:Spigot:PADME:unitId:schema:unknown;1",
									  "displayName":{
										 "en":"unknown"
									  },
									  "enumValue":0,
									  "name":"unknown"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:unitId:schema:temperatureInDegreesC;1",
									  "displayName":{
										 "en":"temperature in degrees C"
									  },
									  "enumValue":1,
									  "name":"temperatureInDegreesC"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:unitId:schema:boolean;1",
									  "displayName":{
										 "en":"boolean"
									  },
									  "enumValue":2,
									  "name":"boolean"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:unitId:schema:Watt;1",
									  "displayName":{
										 "en":"Watt"
									  },
									  "enumValue":3,
									  "name":"Watt"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:unitId:schema:Joule;1",
									  "displayName":{
										 "en":"Joule"
									  },
									  "enumValue":4,
									  "name":"Joule"
								   }
								],
								"valueSchema":"integer"
							 }
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:sensorIndex;1",
							 "@type":[
								"Field",
								"NumberValue"
							 ],
							 "comment":"index of sensor within device",
							 "description":{
								"en":"the index of the sensor if there is more than one sensor"
							 },
							 "displayName":{
								"en":"sensorIndex"
							 },
							 "name":"sensorIndex",
							 "schema":"integer"
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:numVal;1",
							 "@type":[
								"Field",
								"NumberValue"
							 ],
							 "comment":"parsed value",
							 "description":{
								"en":"the measured numerical value"
							 },
							 "displayName":{
								"en":"numVal"
							 },
							 "name":"numVal",
							 "schema":"double"
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:msgForm;1",
							 "@type":"Field",
							 "comment":"whether raw or parsed",
							 "description":{
								"en":"the enumerated message format"
							 },
							 "displayName":{
								"en":"msgForm"
							 },
							 "name":"msgForm",
							 "schema":{
								"@id":"dtmi:Spigot:PADME:msgForm:schema;1",
								"@type":"Enum",
								"displayName":{
								   "en":"Enum"
								},
								"enumValues":[
								   {
									  "@id":"dtmi:Spigot:PADME:msgForm:schema:parsed;1",
									  "displayName":{
										 "en":"parsed"
									  },
									  "enumValue":0,
									  "name":"parsed"
								   },
								   {
									  "@id":"dtmi:Spigot:PADME:msgForm:schema:raw;1",
									  "displayName":{
										 "en":"raw"
									  },
									  "enumValue":1,
									  "name":"raw"
								   }
								],
								"valueSchema":"integer"
							 }
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:strVal;1",
							 "@type":[
								"Field",
								"StringValue"
							 ],
							 "comment":"raw value",
							 "description":{
								"en":"the value as string"
							 },
							 "displayName":{
								"en":"strVal"
							 },
							 "name":"strVal",
							 "schema":"string"
						  },
						  {
							 "@id":"dtmi:Spigot:PADME:fullKey;1",
							 "@type":[
								"Field",
								"StringValue"
							 ],
							 "comment":"identifier of strVal",
							 "description":{
								"en":"the full identifier of the value being sent"
							 },
							 "displayName":{
								"en":"fullKey"
							 },
							 "name":"fullKey",
							 "schema":"string"
						  }
					   ]
					}
				 },
				 {
					"name":"age",
					"displayName":"age",
					"description":{
					   "en":"age at send time in ms"
					},
					"schema":"integer"
				 }
			  ]
		   }
		}
	 },
	 {
		"@id":"dtmi:Spigot:MQTT;1",
		"@type":"Command",
		"commandType":"asynchronous",
		"comment":"asynchronous",
		"description":{
		   "en":"Send an MQTT command (topic and payload)"
		},
		"displayName":{
		   "en":"MQTT"
		},
		"name":"MQTT",
		"request":{
		   "@type":"CommandPayload",
		   "displayName":{
			  "en":"command"
		   },
		   "name":"command",
		   "schema":{
			  "@type":"Object",
			  "displayName":{
				 "en":"Object"
			  },
			  "fields":[
				 {
					"displayName":{
					   "en":"topic"
					},
					"name":"topic",
					"schema":"string"
				 },
				 {
					"displayName":{
					   "en":"payload"
					},
					"name":"payload",
					"schema":"string"
				 }
			  ]
		   }
		},
		"response":{
		   "@type":"CommandPayload",
		   "comment":"response object as for a direct message",
		   "description":{
			  "en":"response object"
		   },
		   "displayName":{
			  "en":"result"
		   },
		   "name":"result",
		   "schema":{
			  "@type":"Object",
			  "displayName":{
				 "en":"Object"
			  },
			  "fields":[
				 {
					"displayName":{
					   "en":"status"
					},
					"name":"status",
					"schema":"integer"
				 },
				 {
					"displayName":{
					   "en":"paylod"
					},
					"name":"paylod",
					"dtmi:dtdl:property:schema;2":{
					   "@type":"Object",
					   "displayName":{
						  "en":"Object"
					   },
					   "fields":[
						  {
							 "displayName":{
								"en":"Result"
							 },
							 "name":"Result",
							 "schema":"string"
						  }
					   ]
					}
				 }
			  ]
		   }
		}
	 }
  ],
  "displayName":{
	 "en":"Spigot"
  },
  "description":{
	 "en":"The device the EgdeConcentrator implements to send telemetry and receive commands from another IoT hub"
  },
  "@context":[
	 "dtmi:dtdl:context;2"
  ]
}